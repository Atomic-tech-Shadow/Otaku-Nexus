CONFIGURATION API ANIME-SAMA POUR FRONTEND
=============================================

URL DE L'API DÉPLOYÉE
=====================
URL de base: https://api-anime-sama.onrender.com

ENDPOINTS PRINCIPAUX
===================

1. RECHERCHE D'ANIME
   Endpoint: /api/search
   Méthode: GET
   Paramètres: ?query=nom_anime
   Exemple: https://api-anime-sama.onrender.com/api/search?query=one%20piece

2. DÉTAILS D'UN ANIME
   Endpoint: /api/anime/[id]
   Méthode: GET
   Exemple: https://api-anime-sama.onrender.com/api/anime/one-piece

3. ÉPISODES D'UN ANIME
   Endpoint: /api/episode/[id]
   Méthode: GET
   Exemple: https://api-anime-sama.onrender.com/api/episode/one-piece-1

4. CATALOGUE COMPLET
   Endpoint: /api/catalogue
   Méthode: GET
   Exemple: https://api-anime-sama.onrender.com/api/catalogue

5. TENDANCES/POPULAIRES
   Endpoint: /api/trending
   Méthode: GET
   Exemple: https://api-anime-sama.onrender.com/api/trending

6. GENRES DISPONIBLES
   Endpoint: /api/genres
   Méthode: GET
   Exemple: https://api-anime-sama.onrender.com/api/genres

7. ANIME ALÉATOIRE
   Endpoint: /api/random
   Méthode: GET
   Exemple: https://api-anime-sama.onrender.com/api/random

8. RECHERCHE AVANCÉE
   Endpoint: /api/advanced-search
   Méthode: GET
   Paramètres: ?query=anime&genre=action&year=2023
   Exemple: https://api-anime-sama.onrender.com/api/advanced-search?query=demon&genre=shounen

CONFIGURATION JAVASCRIPT POUR FRONTEND
======================================

// Configuration de base
const API_BASE_URL = 'https://api-anime-sama.onrender.com';

// Headers CORS requis
const API_HEADERS = {
    'Content-Type': 'application/json',
    'Accept': 'application/json',
    'Origin': window.location.origin
};

// Fonction utilitaire pour les requêtes API
async function apiRequest(endpoint, options = {}) {
    try {
        const url = `${API_BASE_URL}${endpoint}`;
        const response = await fetch(url, {
            method: 'GET',
            headers: API_HEADERS,
            mode: 'cors',
            ...options
        });
        
        if (!response.ok) {
            throw new Error(`Erreur API: ${response.status}`);
        }
        
        return await response.json();
    } catch (error) {
        console.error('Erreur requête API:', error);
        throw error;
    }
}

// Fonction de recherche d'anime
async function searchAnime(query) {
    const encodedQuery = encodeURIComponent(query);
    return await apiRequest(`/api/search?query=${encodedQuery}`);
}

// Fonction pour obtenir les détails d'un anime
async function getAnimeDetails(animeId) {
    return await apiRequest(`/api/anime/${animeId}`);
}

// Fonction pour obtenir les épisodes
async function getEpisode(episodeId) {
    return await apiRequest(`/api/episode/${episodeId}`);
}

// Fonction pour obtenir le catalogue
async function getCatalogue() {
    return await apiRequest('/api/catalogue');
}

// Fonction pour obtenir les tendances
async function getTrending() {
    return await apiRequest('/api/trending');
}

EXEMPLES D'UTILISATION
=====================

1. RECHERCHE D'ANIME:
-------------------
searchAnime('one piece').then(data => {
    console.log('Résultats de recherche:', data);
    // data contient un tableau d'animes correspondants
});

2. OBTENIR DÉTAILS D'UN ANIME:
-----------------------------
getAnimeDetails('one-piece').then(data => {
    console.log('Détails anime:', data);
    // data contient: titre, description, genres, épisodes, etc.
});

3. OBTENIR UN ÉPISODE:
---------------------
getEpisode('one-piece-1087').then(data => {
    console.log('Épisode:', data);
    // data contient: sources streaming, titre épisode, etc.
});

4. AFFICHER LE CATALOGUE:
------------------------
getCatalogue().then(data => {
    console.log('Catalogue:', data);
    // data contient tous les animes disponibles
});

INTÉGRATION DANS UNE PAGE HTML
==============================

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anime Sama - Streaming</title>
</head>
<body>
    <div id="search-container">
        <input type="text" id="search-input" placeholder="Rechercher un anime...">
        <button onclick="rechercher()">Rechercher</button>
    </div>
    
    <div id="results-container"></div>
    
    <script>
        const API_BASE_URL = 'https://api-anime-sama.onrender.com';
        
        async function rechercher() {
            const query = document.getElementById('search-input').value;
            if (!query) return;
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/search?query=${encodeURIComponent(query)}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    mode: 'cors'
                });
                
                const data = await response.json();
                afficherResultats(data);
            } catch (error) {
                console.error('Erreur:', error);
                document.getElementById('results-container').innerHTML = 
                    '<p>Erreur lors de la recherche</p>';
            }
        }
        
        function afficherResultats(animes) {
            const container = document.getElementById('results-container');
            container.innerHTML = '';
            
            animes.forEach(anime => {
                const div = document.createElement('div');
                div.innerHTML = `
                    <h3>${anime.title}</h3>
                    <p>${anime.description || 'Description non disponible'}</p>
                    <button onclick="voirAnime('${anime.id}')">Voir l'anime</button>
                `;
                container.appendChild(div);
            });
        }
        
        async function voirAnime(animeId) {
            try {
                const response = await fetch(`${API_BASE_URL}/api/anime/${animeId}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    mode: 'cors'
                });
                
                const anime = await response.json();
                console.log('Détails anime:', anime);
                // Afficher les détails de l'anime
            } catch (error) {
                console.error('Erreur:', error);
            }
        }
    </script>
</body>
</html>

GESTION DES ERREURS
==================

// Fonction avec gestion d'erreurs complète
async function apiRequestSecure(endpoint) {
    try {
        const response = await fetch(`${API_BASE_URL}${endpoint}`, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json'
            },
            mode: 'cors',
            timeout: 10000 // 10 secondes timeout
        });
        
        if (!response.ok) {
            if (response.status === 404) {
                throw new Error('Anime non trouvé');
            } else if (response.status === 500) {
                throw new Error('Erreur serveur');
            } else {
                throw new Error(`Erreur HTTP: ${response.status}`);
            }
        }
        
        const data = await response.json();
        return data;
        
    } catch (error) {
        if (error.name === 'TypeError') {
            throw new Error('Erreur de connexion à l\'API');
        }
        throw error;
    }
}

CONFIGURATION POUR DIFFÉRENTS FRAMEWORKS
=======================================

REACT:
------
// hooks/useApi.js
import { useState, useEffect } from 'react';

const API_BASE_URL = 'https://api-anime-sama.onrender.com';

export function useAnimeSearch(query) {
    const [animes, setAnimes] = useState([]);
    const [loading, setLoading] = useState(false);
    const [error, setError] = useState(null);
    
    useEffect(() => {
        if (!query) return;
        
        const searchAnimes = async () => {
            setLoading(true);
            setError(null);
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/search?query=${encodeURIComponent(query)}`);
                const data = await response.json();
                setAnimes(data);
            } catch (err) {
                setError(err.message);
            } finally {
                setLoading(false);
            }
        };
        
        searchAnimes();
    }, [query]);
    
    return { animes, loading, error };
}

VUE.JS:
-------
// composables/useApi.js
import { ref, computed } from 'vue';

const API_BASE_URL = 'https://api-anime-sama.onrender.com';

export function useAnimeApi() {
    const animes = ref([]);
    const loading = ref(false);
    const error = ref(null);
    
    const searchAnime = async (query) => {
        loading.value = true;
        error.value = null;
        
        try {
            const response = await fetch(`${API_BASE_URL}/api/search?query=${encodeURIComponent(query)}`);
            const data = await response.json();
            animes.value = data;
        } catch (err) {
            error.value = err.message;
        } finally {
            loading.value = false;
        }
    };
    
    return {
        animes: computed(() => animes.value),
        loading: computed(() => loading.value),
        error: computed(() => error.value),
        searchAnime
    };
}

POINTS IMPORTANTS À RETENIR
===========================

1. L'URL de base est: https://api-anime-sama.onrender.com
2. Tous les endpoints commencent par /api/
3. L'API utilise CORS, donc accessible depuis n'importe quel domaine
4. Les paramètres de recherche doivent être encodés avec encodeURIComponent()
5. L'API retourne toujours du JSON
6. Gérer les erreurs 404 (anime non trouvé) et 500 (erreur serveur)
7. L'API est optimisée pour extraire des données authentiques d'anime-sama.fr
8. Les IDs d'anime sont au format kebab-case (ex: "one-piece", "demon-slayer")

ENDPOINTS DE TEST RAPIDE
========================

Pour tester rapidement l'API:
- Santé API: https://api-anime-sama.onrender.com/api/health
- Recherche test: https://api-anime-sama.onrender.com/api/search?query=naruto
- Catalogue: https://api-anime-sama.onrender.com/api/catalogue
- Anime populaire: https://api-anime-sama.onrender.com/api/anime/one-piece

Cette configuration vous permettra d'intégrer parfaitement l'API dans votre frontend avec toutes les fonctionnalités disponibles.